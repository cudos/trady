<!DOCTYPE html>
<html>
<head lang="en">
  <meta charset="UTF-8">
  <title>{{ symbol }}</title>
  <link rel="stylesheet" href="static/style.css">
  <script src="/static/jquery-3.1.1.min.js"></script>
  <script src="/static/highstock/code/highstock.js"></script>
</head>
<body>
  <h1>{{ symbol }} Stock Report</h1>
  <div id="all-prices"></div>
</body>
<script>
  $(function () {
    $.getJSON('prices?symbol={{ symbol }}', function (data) {
      console.log(data);
      var len = data.length,
          newData = [],
          i;

      for (i = 0; i < data.length; i += 1) {
        newData.push([data[i].date, data[i].close]);
      }

      Highcharts.stockChart('all-prices', {
        rangeSelector: {
          selected: 1
        },
        title: {
          text: '{{ symbol }} Stock Price'
        },
        series: [{
          name: '{{ symbol }}',
          data: newData,
          tooltip: {
            valueDecimals: 2
          }
        }]
      });
    });
  })
</script>
</html>
